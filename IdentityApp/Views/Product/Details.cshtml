@model ProductAndReviewViewModel


<table class="table table-striped">
  <tr>
    <th>ProductID</th>
    <th>Price</th>
    <th>Name</th>
    <th>Average Rating</th>
    <th>Picture</th>
    <th>Stock</th>
    <th>CompanyID</th>
    <th>UserId</th>
  </tr>

  <tr>
    <td>@Model.Product.ProductID</td>
    <td>@Model.Product.Price</td>
    <td>@Model.Product.Name</td>
    <td>@Model.CalculateAverageRating()</td>
    <td><img style="width: 200px; height: 170px" src="@Model.Product.Picture" /></td>
    <td>@Model.Product.Stock</td>
    <td>@Model.Product.CompanyID</td>
    <td>@Model.Product.UserId</td>
  </tr>

    
</table>
<h6>REVIEWS: </h6>
<table class="table table-striped table-dark">
    <tr>
        <th>User Comment</th>
        <th>Rating</th>
    </tr>
    @{
        foreach(var review in @Model.Reviews){
            
            <tr>
                <td>@review.Body</td>
                <td>@review.Rating</td>
                <td> <a class="btn btn-secondary" asp-action="Create" asp-controller="Comment" asp-route-productID="@review.ProductID" asp-route-reviewID="@review.ID">Comment</a></td>
                <td>
                    <table class="table table-striped table-dark">
                        <tr>
                            <th>User ID</th>
                            <th>Comment</th>
                        </tr>
                        @{
                            foreach(var comment in Model.CommentsForReviews)
                            {
                                <tr>
                                    <td>@comment.UserId</td>
                                    <td>@comment.Body</td>
                                </tr>
                            }
                        }

                    </table>
                </td>
            </tr>
        }
    }
</table>